<main style="display: flex; flex-direction:column; align-items:center; margin-top:50px">
  <h1>Solicitar cambio de contraseña</h1>
  <form style="width: 380px;">
    <input type="email" name="email" id="email" placeholder="Ingrese su email" required />
    <input type="button" id="send-reset" value="Enviar enlace de recuperación" />
  </form>
</main>

<script>
  document.getElementById("send-reset").addEventListener("click", async () => {
    const email = document.getElementById("email").value;

    if (!email) return alert("Por favor ingresá un email.");

    try {
      const response = await fetch("/api/auth/resetPassword", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ email })
      });

      const result = await response.json();

      if (response.ok) {
        alert("Enlace de recuperación enviado. Revisá tu correo.");
      } else {
        alert(result.message || "Error al enviar el enlace.");
      }
    } catch (err) {
      console.error(err);
      alert("Error al intentar enviar el correo.");
    }
  });
</script>
